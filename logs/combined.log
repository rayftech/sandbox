2025-04-03 17:43:43 [UserModel] INFO: Configuring User model 
2025-04-03 17:43:43 [StrapiAuthService] INFO: StrapiAuthService initialized with baseURL: http://localhost:1337 
2025-04-03 17:43:43 [SwaggerConfig] INFO: Swagger documentation initialized at /api-docs 
2025-04-03 17:43:43 [UserModel] INFO: User model initialized 
2025-04-03 17:43:43 [StrapiAuthService] INFO: Authentication method: API Token 
2025-04-03 17:43:44 [database] INFO: Connected to MongoDB 
2025-04-03 17:43:44 [Server] INFO: Database connection established 
2025-04-03 17:43:44 [ServiceConfig] INFO: RabbitMQ Configuration:
    - Enabled: true
    - Host: localhost
    - Port: 5672
    - User: admin
    - Password: ********
    - Reconnect Attempts: 10 
2025-04-03 17:43:44 [RabbitMQService] INFO: RabbitMQ Connection Details: {
  "host": "localhost",
  "port": 5672,
  "user": "admin",
  "vhost": "/",
  "dockerEnv": false
}
2025-04-03 17:43:44 [database] INFO: Database connection established 
2025-04-03 17:43:44 [ServiceConfig] INFO: Strapi Configuration:
    - Enabled: true
    - Base URL: http://localhost:1337
    - API Token: ebd9e...831c0
    - Username: None 
2025-04-03 17:43:44 [ServiceConfig] INFO: MongoDB Configuration:
    - URI: mongodb+srv://***:***@cluster0.vqhve.mongodb.net/?retryWrites=true&w=majority&appName=Cluster0 
2025-04-03 17:43:44 [RabbitMQService] INFO: Connecting to RabbitMQ at localhost:5672 
2025-04-03 17:43:44 [RabbitMQService] INFO: Attempting connection with string: amqp://admin:****@localhost:5672/ 
2025-04-03 17:43:44 [RabbitMQService] INFO: Successfully connected to RabbitMQ at localhost 
2025-04-03 17:43:44 [RabbitMQService] DEBUG: Exchange 'events' of type 'topic' asserted successfully 
2025-04-03 17:43:44 [RabbitMQService] DEBUG: Exchange 'notifications' of type 'direct' asserted successfully 
2025-04-03 17:43:44 [RabbitMQService] DEBUG: Queue 'notification' asserted successfully 
2025-04-03 17:43:44 [RabbitMQService] DEBUG: Queue 'partnership_request' asserted successfully 
2025-04-03 17:43:44 [RabbitMQService] DEBUG: Queue 'analytics' asserted successfully 
2025-04-03 17:43:44 [RabbitMQService] DEBUG: Queue 'email' asserted successfully 
2025-04-03 17:43:44 [RabbitMQService] DEBUG: Queue 'notification' bound to exchange 'events' with routing key 'notification.#' 
2025-04-03 17:43:44 [RabbitMQService] DEBUG: Queue 'partnership_request' bound to exchange 'events' with routing key 'partnership.#' 
2025-04-03 17:43:44 [RabbitMQService] DEBUG: Queue 'analytics' bound to exchange 'events' with routing key '#' 
2025-04-03 17:43:44 [RabbitMQService] DEBUG: Queue 'email' bound to exchange 'notifications' with routing key 'email' 
2025-04-03 17:43:44 [EventPublisher] INFO: Event publisher initialized successfully 
2025-04-03 17:43:44 [Server] INFO: Event publisher initialized 
2025-04-03 17:43:44 [RabbitMQService] DEBUG: Queue 'user_sync' asserted successfully 
2025-04-03 17:43:44 [RabbitMQService] DEBUG: Queue 'user_sync' asserted successfully 
2025-04-03 17:43:44 [RabbitMQService] INFO: Consumer registered for queue 'user_sync' with tag 'amq.ctag-6dHZivFtH--QTAIkHYKPnw' 
2025-04-03 17:43:44 [Server] INFO: User consumer service initialized 
2025-04-03 17:43:44 [UserConsumerService] INFO: User consumer service initialized successfully 
2025-04-03 17:43:44 [RabbitMQService] DEBUG: Exchange 'strapi_requests' of type 'direct' asserted successfully 
2025-04-03 17:43:44 [RabbitMQService] DEBUG: Exchange 'strapi_responses' of type 'direct' asserted successfully 
2025-04-03 17:43:44 [RabbitMQService] DEBUG: Queue 'strapi_operation_requests' asserted successfully 
2025-04-03 17:43:44 [RabbitMQService] DEBUG: Queue 'strapi_operation_responses' asserted successfully 
2025-04-03 17:43:44 [RabbitMQService] DEBUG: Queue 'strapi_operation_requests' bound to exchange 'strapi_requests' with routing key 'strapi.request' 
2025-04-03 17:43:44 [RabbitMQService] DEBUG: Queue 'strapi_operation_responses' bound to exchange 'strapi_responses' with routing key 'strapi.response' 
2025-04-03 17:43:44 [RabbitMQService] DEBUG: Queue 'strapi_operation_responses' asserted successfully 
2025-04-03 17:43:44 [RabbitMQService] INFO: Consumer registered for queue 'strapi_operation_responses' with tag 'amq.ctag-g4lEvYYNpZ_CVkO3XnLpjg' 
2025-04-03 17:43:44 [RequestResponseService] INFO: Request-Response service initialized successfully 
2025-04-03 17:43:44 [Server] INFO: Request-Response service initialized 
2025-04-03 17:43:44 [RabbitMQService] DEBUG: Queue 'strapi_events' asserted successfully 
2025-04-03 17:43:44 [RabbitMQService] DEBUG: Queue 'strapi_events' asserted successfully 
2025-04-03 17:43:44 [RabbitMQService] INFO: Consumer registered for queue 'strapi_events' with tag 'amq.ctag-3WQgFm1i_e9i9-rdECIBqQ' 
2025-04-03 17:43:44 [StrapiSyncService] INFO: Strapi Sync Service initialized successfully 
2025-04-03 17:43:44 [RabbitMQService] DEBUG: Exchange 'strapi_requests' of type 'direct' asserted successfully 
2025-04-03 17:43:44 [RabbitMQService] DEBUG: Exchange 'strapi_responses' of type 'direct' asserted successfully 
2025-04-03 17:43:44 [RabbitMQService] DEBUG: Queue 'strapi_operation_requests' asserted successfully 
2025-04-03 17:43:44 [RabbitMQService] DEBUG: Queue 'strapi_operation_responses' asserted successfully 
2025-04-03 17:43:44 [RabbitMQService] DEBUG: Queue 'strapi_operation_requests' bound to exchange 'strapi_requests' with routing key 'strapi.request' 
2025-04-03 17:43:44 [RabbitMQService] DEBUG: Queue 'strapi_operation_requests' asserted successfully 
2025-04-03 17:43:44 [RabbitMQService] INFO: Consumer registered for queue 'strapi_operation_requests' with tag 'amq.ctag-i7To_4LgpgPPQB9IZFHEsg' 
2025-04-03 17:43:44 [StrapiConsumerService] INFO: Strapi consumer service initialized successfully 
2025-04-03 17:43:44 [Server] INFO: Strapi consumer service initialized 
2025-04-03 17:43:44 [Server] INFO: Service initialization complete: 4 initialized, 0 failed 
2025-04-03 17:43:44 [Server] INFO: Server running on port 3000 
2025-04-03 17:44:37 [app] DEBUG: API Request: [POST] /api/courses 
2025-04-03 17:44:37 [CourseService] INFO: Creating course in Strapi using queue: Introduction to Computer Science (COMP9021) 
2025-04-03 17:44:37 [StrapiSyncService] INFO: Queued course creation request for course Introduction to Computer Science (COMP9021) 
2025-04-03 17:44:37 [StrapiSyncService] INFO: Created course in Strapi with ID 80 
2025-04-03 17:44:37 [CourseService] INFO: Successfully created course in Strapi with ID: 80 
2025-04-03 17:44:37 [CourseService] INFO: Incremented totalCoursesCreated by 1 for user d95e64d8-0091-70e1-e5d2-1d8686200f45 
2025-04-03 17:44:37 [RabbitMQService] DEBUG: Message published to exchange 'events' with routing key 'course.created' successfully 
2025-04-03 17:44:37 [EventPublisher] INFO: Published course event: course.created, ID: 67ee2e55313e30f02d01d47e 
2025-04-03 17:44:37 [CourseService] INFO: Published COURSE_CREATED event for course 67ee2e55313e30f02d01d47e 
2025-04-03 17:44:37 [CourseService] INFO: New course created in MongoDB: 67ee2e55313e30f02d01d47e by user d95e64d8-0091-70e1-e5d2-1d8686200f45 from Australia, organisation: university of new south wales 
2025-04-03 17:44:37 [CourseController] INFO: Course 67ee2e55313e30f02d01d47e already has a valid Strapi ID: 80 
2025-04-03 17:44:37 [RabbitMQService] DEBUG: Message published to exchange 'events' with routing key 'course.created' successfully 
2025-04-03 17:44:37 [EventPublisher] INFO: Published course event: course.created, ID: 67ee2e55313e30f02d01d47e 
2025-04-03 17:44:37 [app] INFO: [0mPOST /api/courses [32m201[0m 190.986 ms - 371[0m 
2025-04-03 17:44:37 [CourseController] INFO: Published COURSE_CREATED event for course 67ee2e55313e30f02d01d47e 
2025-04-03 18:14:39 [database] WARN: MongoDB disconnected 
2025-04-03 18:14:39 [database] INFO: Retrying connection in 5000ms (attempt 1/5) 
2025-04-03 18:14:39 [database] INFO: Connected to MongoDB 
2025-04-03 18:14:44 [database] INFO: Using existing database connection 
2025-04-03 18:23:56 [app] DEBUG: API Request: [GET] /api/courses/79 
2025-04-03 18:23:56 [CourseService] ERROR: Error getting course: Invalid course ID format 
2025-04-03 18:23:56 [CourseController] ERROR: Error getting course: Invalid course ID format 
2025-04-03 18:23:56 [ErrorMiddleware] ERROR: 500 - Internal Server Error - /api/courses/79 - GET {
  "error": "Error: Invalid course ID format\n    at Function.getCourseById (/Users/ray/Desktop/sandbox/sandbox_backend/src/services/course.service.ts:346:15)\n    at /Users/ray/Desktop/sandbox/sandbox_backend/src/controllers/course.controller.ts:141:42\n    at /Users/ray/Desktop/sandbox/sandbox_backend/src/middlewares/error.middleware.ts:98:21\n    at Layer.handle [as handle_request] (/Users/ray/Desktop/sandbox/sandbox_backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/ray/Desktop/sandbox/sandbox_backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/ray/Desktop/sandbox/sandbox_backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/ray/Desktop/sandbox/sandbox_backend/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/ray/Desktop/sandbox/sandbox_backend/node_modules/express/lib/router/index.js:284:15\n    at param (/Users/ray/Desktop/sandbox/sandbox_backend/node_modules/express/lib/router/index.js:365:14)\n    at param (/Users/ray/Desktop/sandbox/sandbox_backend/node_modules/express/lib/router/index.js:376:14)"
}
2025-04-03 18:23:56 [app] INFO: [0mGET /api/courses/79 [31m500[0m 72.349 ms - 1211[0m 
2025-04-03 18:33:00 [database] WARN: MongoDB disconnected 
2025-04-03 18:33:00 [database] INFO: Retrying connection in 5000ms (attempt 1/5) 
2025-04-03 18:33:06 [database] INFO: Connected to MongoDB 
2025-04-03 18:33:06 [database] INFO: Connected to MongoDB 
2025-04-03 18:33:06 [database] INFO: Database connection established 
2025-04-03 18:36:39 [database] INFO: Application termination - closing MongoDB connection 
2025-04-03 18:36:39 [Server] INFO: Received shutdown signal, starting graceful shutdown 
2025-04-03 18:37:13 [UserModel] INFO: Configuring User model 
2025-04-03 18:37:13 [StrapiAuthService] INFO: StrapiAuthService initialized with baseURL: http://localhost:1337 
2025-04-03 18:37:13 [SwaggerConfig] INFO: Swagger documentation initialized at /api-docs 
2025-04-03 18:37:13 [UserModel] INFO: User model initialized 
2025-04-03 18:37:13 [StrapiAuthService] INFO: Authentication method: API Token 
2025-04-03 18:37:13 [database] INFO: Connected to MongoDB 
2025-04-03 18:37:13 [Server] INFO: Database connection established 
2025-04-03 18:37:13 [ServiceConfig] INFO: RabbitMQ Configuration:
    - Enabled: true
    - Host: localhost
    - Port: 5672
    - User: admin
    - Password: ********
    - Reconnect Attempts: 10 
2025-04-03 18:37:13 [RabbitMQService] INFO: RabbitMQ Connection Details: {
  "host": "localhost",
  "port": 5672,
  "user": "admin",
  "vhost": "/",
  "dockerEnv": false
}
2025-04-03 18:37:13 [database] INFO: Database connection established 
2025-04-03 18:37:13 [ServiceConfig] INFO: Strapi Configuration:
    - Enabled: true
    - Base URL: http://localhost:1337
    - API Token: ebd9e...831c0
    - Username: None 
2025-04-03 18:37:13 [ServiceConfig] INFO: MongoDB Configuration:
    - URI: mongodb+srv://***:***@cluster0.vqhve.mongodb.net/?retryWrites=true&w=majority&appName=Cluster0 
2025-04-03 18:37:13 [RabbitMQService] INFO: Connecting to RabbitMQ at localhost:5672 
2025-04-03 18:37:13 [RabbitMQService] INFO: Attempting connection with string: amqp://admin:****@localhost:5672/ 
2025-04-03 18:37:14 [RabbitMQService] INFO: Successfully connected to RabbitMQ at localhost 
2025-04-03 18:37:14 [RabbitMQService] DEBUG: Exchange 'events' of type 'topic' asserted successfully 
2025-04-03 18:37:14 [RabbitMQService] DEBUG: Exchange 'notifications' of type 'direct' asserted successfully 
2025-04-03 18:37:14 [RabbitMQService] DEBUG: Queue 'notification' asserted successfully 
2025-04-03 18:37:14 [RabbitMQService] DEBUG: Queue 'partnership_request' asserted successfully 
2025-04-03 18:37:14 [RabbitMQService] DEBUG: Queue 'analytics' asserted successfully 
2025-04-03 18:37:14 [RabbitMQService] DEBUG: Queue 'email' asserted successfully 
2025-04-03 18:37:14 [RabbitMQService] DEBUG: Queue 'notification' bound to exchange 'events' with routing key 'notification.#' 
2025-04-03 18:37:14 [RabbitMQService] DEBUG: Queue 'partnership_request' bound to exchange 'events' with routing key 'partnership.#' 
2025-04-03 18:37:14 [RabbitMQService] DEBUG: Queue 'analytics' bound to exchange 'events' with routing key '#' 
2025-04-03 18:37:14 [RabbitMQService] DEBUG: Queue 'email' bound to exchange 'notifications' with routing key 'email' 
2025-04-03 18:37:14 [EventPublisher] INFO: Event publisher initialized successfully 
2025-04-03 18:37:14 [Server] INFO: Event publisher initialized 
2025-04-03 18:37:14 [RabbitMQService] DEBUG: Queue 'user_sync' asserted successfully 
2025-04-03 18:37:14 [RabbitMQService] DEBUG: Queue 'user_sync' asserted successfully 
2025-04-03 18:37:14 [RabbitMQService] INFO: Consumer registered for queue 'user_sync' with tag 'amq.ctag-NoTYBmKhRJAo3d6D7cllJA' 
2025-04-03 18:37:14 [UserConsumerService] INFO: User consumer service initialized successfully 
2025-04-03 18:37:14 [Server] INFO: User consumer service initialized 
2025-04-03 18:37:14 [RabbitMQService] DEBUG: Exchange 'strapi_requests' of type 'direct' asserted successfully 
2025-04-03 18:37:14 [RabbitMQService] DEBUG: Exchange 'strapi_responses' of type 'direct' asserted successfully 
2025-04-03 18:37:14 [RabbitMQService] DEBUG: Queue 'strapi_operation_requests' asserted successfully 
2025-04-03 18:37:14 [RabbitMQService] DEBUG: Queue 'strapi_operation_responses' asserted successfully 
2025-04-03 18:37:14 [RabbitMQService] DEBUG: Queue 'strapi_operation_requests' bound to exchange 'strapi_requests' with routing key 'strapi.request' 
2025-04-03 18:37:14 [RabbitMQService] DEBUG: Queue 'strapi_operation_responses' bound to exchange 'strapi_responses' with routing key 'strapi.response' 
2025-04-03 18:37:14 [RabbitMQService] DEBUG: Queue 'strapi_operation_responses' asserted successfully 
2025-04-03 18:37:14 [RabbitMQService] INFO: Consumer registered for queue 'strapi_operation_responses' with tag 'amq.ctag-yKUILbsJN1pxH8J6wjhwLg' 
2025-04-03 18:37:14 [RequestResponseService] INFO: Request-Response service initialized successfully 
2025-04-03 18:37:14 [Server] INFO: Request-Response service initialized 
2025-04-03 18:37:14 [RabbitMQService] DEBUG: Queue 'strapi_events' asserted successfully 
2025-04-03 18:37:14 [RabbitMQService] DEBUG: Queue 'strapi_events' asserted successfully 
2025-04-03 18:37:14 [RabbitMQService] INFO: Consumer registered for queue 'strapi_events' with tag 'amq.ctag-cu_emeX5Jvo62dKo7DAEqw' 
2025-04-03 18:37:14 [StrapiSyncService] INFO: Strapi Sync Service initialized successfully 
2025-04-03 18:37:14 [RabbitMQService] DEBUG: Exchange 'strapi_requests' of type 'direct' asserted successfully 
2025-04-03 18:37:14 [RabbitMQService] DEBUG: Exchange 'strapi_responses' of type 'direct' asserted successfully 
2025-04-03 18:37:14 [RabbitMQService] DEBUG: Queue 'strapi_operation_requests' asserted successfully 
2025-04-03 18:37:14 [RabbitMQService] DEBUG: Queue 'strapi_operation_responses' asserted successfully 
2025-04-03 18:37:14 [RabbitMQService] DEBUG: Queue 'strapi_operation_requests' bound to exchange 'strapi_requests' with routing key 'strapi.request' 
2025-04-03 18:37:14 [RabbitMQService] DEBUG: Queue 'strapi_operation_requests' asserted successfully 
2025-04-03 18:37:14 [RabbitMQService] INFO: Consumer registered for queue 'strapi_operation_requests' with tag 'amq.ctag-KlS4vSyTi3G2kNz60HwSSQ' 
2025-04-03 18:37:14 [StrapiConsumerService] INFO: Strapi consumer service initialized successfully 
2025-04-03 18:37:14 [Server] INFO: Strapi consumer service initialized 
2025-04-03 18:37:14 [Server] INFO: Service initialization complete: 4 initialized, 0 failed 
2025-04-03 18:37:14 [Server] INFO: Server running on port 3000 
2025-04-03 18:53:30 [app] DEBUG: API Request: [POST] /api/courses 
2025-04-03 18:53:30 [CourseService] INFO: Creating course in Strapi using queue: Introduction to Computer Science (COMP9021) 
2025-04-03 18:53:30 [StrapiSyncService] INFO: Queued course creation request for course Introduction to Computer Science (COMP9021) 
2025-04-03 18:53:30 [StrapiSyncService] INFO: Created course in Strapi with ID 81 
2025-04-03 18:53:30 [CourseService] INFO: Successfully created course in Strapi with ID: 81 
2025-04-03 18:53:30 [CourseService] INFO: Incremented totalCoursesCreated by 1 for user d95e64d8-0091-70e1-e5d2-1d8686200f45 
2025-04-03 18:53:30 [RabbitMQService] DEBUG: Message published to exchange 'events' with routing key 'course.created' successfully 
2025-04-03 18:53:30 [EventPublisher] INFO: Published course event: course.created, ID: 67ee3e7a7eed51ed4fb4e30c 
2025-04-03 18:53:30 [CourseService] INFO: Published COURSE_CREATED event for course 67ee3e7a7eed51ed4fb4e30c 
2025-04-03 18:53:30 [CourseService] INFO: New course created in MongoDB: 67ee3e7a7eed51ed4fb4e30c by user d95e64d8-0091-70e1-e5d2-1d8686200f45 from Australia, organisation: university of new south wales 
2025-04-03 18:53:30 [CourseController] INFO: Course 67ee3e7a7eed51ed4fb4e30c already has a valid Strapi ID: 81 
2025-04-03 18:53:30 [RabbitMQService] DEBUG: Message published to exchange 'events' with routing key 'course.created' successfully 
2025-04-03 18:53:30 [EventPublisher] INFO: Published course event: course.created, ID: 67ee3e7a7eed51ed4fb4e30c 
2025-04-03 18:53:30 [app] INFO: [0mPOST /api/courses [32m201[0m 487.243 ms - 371[0m 
2025-04-03 18:53:30 [CourseController] INFO: Published COURSE_CREATED event for course 67ee3e7a7eed51ed4fb4e30c 
2025-04-03 18:56:54 [app] DEBUG: API Request: [POST] /api/courses 
2025-04-03 18:56:54 [CourseService] INFO: Creating course in Strapi using queue: Introduction to Computer Science (COMP9021) 
2025-04-03 18:56:54 [StrapiAuthService] ERROR: No response received:  
2025-04-03 18:56:54 [RetryUtility] WARN: Retry attempt 1/3 failed. Retrying in 1 seconds. 
2025-04-03 18:56:54 [RetryUtility] DEBUG: Error:  
2025-04-03 18:56:56 [StrapiAuthService] ERROR: No response received:  
2025-04-03 18:56:56 [RetryUtility] WARN: Retry attempt 2/3 failed. Retrying in 2 seconds. 
2025-04-03 18:56:56 [RetryUtility] DEBUG: Error:  
2025-04-03 18:56:58 [StrapiSyncService] INFO: Queued course creation request for course Introduction to Computer Science (COMP9021) 
2025-04-03 18:56:58 [StrapiSyncService] INFO: Created course in Strapi with ID 82 
2025-04-03 18:56:58 [CourseService] INFO: Successfully created course in Strapi with ID: 82 
2025-04-03 18:56:58 [CourseService] INFO: Incremented totalCoursesCreated by 1 for user d95e64d8-0091-70e1-e5d2-1d8686200f45 
2025-04-03 18:56:58 [RabbitMQService] DEBUG: Message published to exchange 'events' with routing key 'course.created' successfully 
2025-04-03 18:56:58 [EventPublisher] INFO: Published course event: course.created, ID: 67ee3f4a7eed51ed4fb4e311 
2025-04-03 18:56:58 [CourseService] INFO: Published COURSE_CREATED event for course 67ee3f4a7eed51ed4fb4e311 
2025-04-03 18:56:58 [CourseService] INFO: New course created in MongoDB: 67ee3f4a7eed51ed4fb4e311 by user d95e64d8-0091-70e1-e5d2-1d8686200f45 from Australia, organisation: university of new south wales 
2025-04-03 18:56:58 [CourseController] INFO: Course 67ee3f4a7eed51ed4fb4e311 already has a valid Strapi ID: 82 
2025-04-03 18:56:58 [RabbitMQService] DEBUG: Message published to exchange 'events' with routing key 'course.created' successfully 
2025-04-03 18:56:58 [EventPublisher] INFO: Published course event: course.created, ID: 67ee3f4a7eed51ed4fb4e311 
2025-04-03 18:56:58 [app] INFO: [0mPOST /api/courses [32m201[0m 3879.412 ms - 371[0m 
2025-04-03 18:56:58 [CourseController] INFO: Published COURSE_CREATED event for course 67ee3f4a7eed51ed4fb4e311 
2025-04-03 18:57:32 [database] INFO: Application termination - closing MongoDB connection 
2025-04-03 18:57:32 [Server] INFO: Received shutdown signal, starting graceful shutdown 
